<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="UTF-8">
		<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta name="apple-mobile-web-app-status-bar" content="#ffffff" />
        <meta name="theme-color" content="#ffffff" />
        
        <link rel="manifest" href="manifest.json">
        
        <!-- ios support -->
        <link rel="apple-touch-icon" href="images/icons/icon-72x72.png">
        <link rel="apple-touch-icon" href="images/icons/icon-96x96.png">
        <link rel="apple-touch-icon" href="images/icons/icon-128x128.png">
        <link rel="apple-touch-icon" href="images/icons/icon-256x256.png">
        <link rel="apple-touch-icon" href="images/icons/icon-512x512.png">
        
        <link rel="apple-touch-startup-image" href="images/splash-screen-image.png">
    
		<!-- <link rel="apple-touch-icon" href="https://www.favicon.cc/logo3d/13114.png"/>
		<link rel="icon" type="image/png" href="https://icons.iconarchive.com/icons/custom-icon-design/flatastic-11/32/Cash-icon.png"> -->

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.standalone.min.css" />

        <title>Our Budget</title>
        
        <style>
            
            html,
            body {
                height: 100%;
                overscroll-behavior-y: contain;
            }
            .footer {
                position: fixed;
                left: 0;
                bottom: 0;
                height: 70px;
                width: 100%;
                color: white;
                text-align: center;
            }
            
        </style>

    </head>

    <body>

        <div class="container">
        
            <form id="form_transaction" action="https://sheetdb.io/api/v1/n09q5n4vvki5y" method="post" id="sheetdb-form" style="padding-top:15px;padding-bottom:130px;">
                <div class="container">test
                    <p><label for="transaction_id">Transaction ID:</label>
                    <input class="form-control" id="transaction_id" name="data[Transaction_ID]" type="text" value="" readonly></p>

                    <p>
                    <label class="radio-inline"><input type="radio" id="transaction_type" name="data[Transaction_Type]" value="Expense" checked> Expense</label>
                    <label class="radio-inline"><input type="radio" id="transaction_type" name="data[Transaction_Type]" value="Income"> Income</label>
                    <input type="hidden" id="transaction_type_text" value="" /></p>
                    
                    <label for="payee">Payee:</label>
                    <div class="form-group">
                        <div class="input-group">
                            <select class="selectpicker" id="payee" name="data[Payee]" data-live-search="true" title="Select a Category" data-size="7">
                                <option disabled selected value></option>
                                <option value="Shoprite">Shoprite</option>
                                <option value="Amazon">Amazon</option>
                                <option value="Target">Target</option>
                                <option value="Walmart">Walmart</option>
                                <option value="Aldi">Aldi</option>
                                <option value="CVS">CVS</option>
                                <option value="Wawa">Wawa</option>
                                <option value="Starbucks">Starbucks</option>
                                <option value="Sandra Salon">Sandra Salon</option>
                                <option value="Dunkin Donuts">Dunkin Donuts</option>
                                <option value="Home Depot">Home Depot</option>
                                <option value="Lowes">Lowes</option>
                                <option value="Bed Bath Beyond">Bed Bath Beyond</option>
                                <option value="Staples">Staples</option>
                                <option value="Subs Galore">Subs Galore</option>
                            </select>
                        </div>
                    </div>
                    
                    <p><label for="split">Split:</label>
                    <input type="checkbox" id="split" name="data[Split]" value="Y"></p> 

                    <label for="category_1">Category:</label>
                    <div class="form-group">
                        <div class="input-group">
                            <select class="selectpicker" id="category_1" name="data[Category_1]" data-live-search="true" title="Select a Category" data-size="7">
                                <option disabled selected value></option>
                                <optgroup label="Automotive">
                                    <option value="DMV Fees">DMV Fees</option>
                                    <option value="Gasoline">Gasoline</option>
                                    <option value="General Maintenance">General Maintenance</option>
                                    <option value="Repairs">Repairs</option>
                                    <option value="Tolls">Tolls</option>
                                </optgroup>
                                <optgroup label="Clothing">
                                    <option value="Clothing">Clothing</option>
                                </optgroup>
                                <optgroup label="Discretionary">
                                    <option value="Date Night">Date Night</option>
                                    <option value="Entertainment">Entertainment</option>
                                    <option value="Grooming">Grooming</option>
                                    <option value="Home Decor">Home Decor</option>
                                    <option value="Miscellaneous">Miscellaneous</option>
                                </optgroup>
                                <optgroup label="Food">
                                    <option value="Dining">Dining</option>
                                    <option value="Fast Food">Fast Food</option>
                                    <option value="Groceries">Groceries</option>
                                    <option value="Snacks">Snacks</option>
                                </optgroup>
                                <optgroup label="Gifts">
                                    <option value="Birthday">Birthday</option>
                                    <option value="Events">Events</option>
                                    <option value="Spontaneous">Spontaneous</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>

                    <div class="input-group">
			<p><label for="amount_1">Amount:</label><br>
                    	<!-- <input class="form-control" id="amount_1" name="data[Category_1_Amount]" type="number" min="0.00" step="0.01" value=""></p> -->
			<div class="input-group-prepend">
				<span class="input-group-text">$</span>
			</div>
                    	<input class="form-control" id="amount_1" name="data[Category_1_Amount]" inputmode="numeric" type="text" pattern="[0-9]*" value="" placeholder="-0.00></p>
		    </div>
                    
                    <label for="category_2">Category:</label>
                    <div class="form-group">
                        <div class="input-group">
                            <select class="selectpicker" id="category_2" name="data[Category_2]" data-live-search="true" title="Select a Category" data-size="7">
                                <option disabled selected value></option>
                                <optgroup label="Automotive">
                                    <option value="DMV Fees">DMV Fees</option>
                                    <option value="Gasoline">Gasoline</option>
                                    <option value="General Maintenance">General Maintenance</option>
                                    <option value="Repairs">Repairs</option>
                                    <option value="Tolls">Tolls</option>
                                </optgroup>
                                <optgroup label="Clothing">
                                    <option value="Clothing">Clothing</option>
                                </optgroup>
                                <optgroup label="Discretionary">
                                    <option value="Date Night">Date Night</option>
                                    <option value="Entertainment">Entertainment</option>
                                    <option value="Grooming">Grooming</option>
                                    <option value="Home Decor">Home Decor</option>
                                    <option value="Miscellaneous">Miscellaneous</option>
                                </optgroup>
                                <optgroup label="Food">
                                    <option value="Dining">Dining</option>
                                    <option value="Fast Food">Fast Food</option>
                                    <option value="Groceries">Groceries</option>
                                    <option value="Snacks">Snacks</option>
                                </optgroup>
                                <optgroup label="Gifts">
                                    <option value="Birthday">Birthday</option>
                                    <option value="Events">Events</option>
                                    <option value="Spontaneous">Spontaneous</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>

                    <p><label for="amount_2">Amount:</label><br>
                    <input class="form-control" id="amount_2" name="data[Category_2_Amount]" type="number" min="0.00" step="0.01" value=""></p>

                    <label for="category_3">Category:</label>
                    <div class="form-group">
                        <div class="input-group">
                            <select class="selectpicker" id="category_3" name="data[Category_3]" data-live-search="true" title="Select a Category" data-size="7">
                                <option disabled selected value></option>
                                <optgroup label="Automotive">
                                    <option value="DMV Fees">DMV Fees</option>
                                    <option value="Gasoline">Gasoline</option>
                                    <option value="General Maintenance">General Maintenance</option>
                                    <option value="Repairs">Repairs</option>
                                    <option value="Tolls">Tolls</option>
                                </optgroup>
                                <optgroup label="Clothing">
                                    <option value="Clothing">Clothing</option>
                                </optgroup>
                                <optgroup label="Discretionary">
                                    <option value="Date Night">Date Night</option>
                                    <option value="Entertainment">Entertainment</option>
                                    <option value="Grooming">Grooming</option>
                                    <option value="Home Decor">Home Decor</option>
                                    <option value="Miscellaneous">Miscellaneous</option>
                                </optgroup>
                                <optgroup label="Food">
                                    <option value="Dining">Dining</option>
                                    <option value="Fast Food">Fast Food</option>
                                    <option value="Groceries">Groceries</option>
                                    <option value="Snacks">Snacks</option>
                                </optgroup>
                                <optgroup label="Gifts">
                                    <option value="Birthday">Birthday</option>
                                    <option value="Events">Events</option>
                                    <option value="Spontaneous">Spontaneous</option>
                                </optgroup>
                            </select>
                        </div>
                    </div>             

                    <p><label for="amount_3">Amount:</label><br>
                    <input class="form-control" id="amount_3" name="data[Category_3_Amount]" type="number" min="0.00" step="0.01" value=""></p>

                    <div class="form-group">
                        <div class="input-group date form_date" data-date="" data-date-format="yyyy-mm-dd" data-link-field="dtp_input1" data-link-format="DD, MM dd yyyy" data-date-end-date="0d">
                            <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>
                            <input class="form-control" id="transaction_date" name="data[Transaction_Date]" size="16" type="text" placeholder="Transaction Date" value="" readonly>
                        </div>
                        <input type="hidden" id="dtp_input1" value="" />
                    </div>

                    <p><label for="cleared">Cleared:</label>
                    <input type="checkbox" id="cleared" name="data[Cleared]" value="Y" checked></p> 

                    <p id="result"><a href="https://docs.google.com/spreadsheets/d/1nl1hJd9mAbw4TFrErvpPvWiccrBesnnAtTl7JffK6B0/edit?usp=sharing" target="_blank">Go to Google Sheet</a></p>
                    
                    <input type="submit" value="Send">
                </div>
            </form>
            
            <div class="footer bg-dark">
                <div class="row">
                    <div class="col-3 text-center"><a class="nav-link" href="#"><img src="images/dashboard48x48.png" alt="Dashboard" style="width:42px;height:42px;"></a></div>
                    <div class="col-3 text-center"><a class="nav-link active" href="#"><img src="images/transactions48x48.png" alt="Transactions" style="width:42px;height:42px;"><span class="sr-only">(current)</span></a></div>
                    <div class="col-3 text-center"><a class="nav-link" href="#"><img src="images/budget48x48.png" alt="Budget" style="width:42px;height:42px;"></a></div>
                    <div class="col-3 text-center"><a class="nav-link" href="#"><img src="images/reports48x48.png" alt="Reports" style="width:42px;height:42px;"></a></div>
                </div>
            </div>
            
        </div>
        
        <script src="js/app.js"></script>
        
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
        
    </body>
  
  
    <script>

        $('.form_date').datepicker({
            weekStart: 0,
            todayBtn: 1,
            autoclose: 1,
            todayHighlight: 1,
            startView: 0,
            minView: 2,
            daysOfWeekHighlighted: [0, 6],
            disableTouchKeyboard: true,
            forceParse: 0
        });
        transaction_date_string = moment().format('YYYY-MM-DD')
        $('#transaction_date').attr("value", transaction_date_string);

        var form = document.getElementById('form_transaction');

        var transaction_id = moment().format('YYYYMMDDHHmmssSSS')
        $("#transaction_id").val(transaction_id);

        

        form.addEventListener("submit", e => {
            transaction_type = $("input[type=radio][id=transaction_type]:checked").val();
            amount_1 = $("#amount_1").val();
            amount_2 = $("#amount_2").val();
            amount_3 = $("#amount_3").val();
            
            if (transaction_type == "Expense") {
                // If expense, convert amounts to negative numbers
                if(amount_1 !="") { $("#amount_1").val(-amount_1) };
                if(amount_2 !="") { $("#amount_2").val(-amount_2) };
                if(amount_3 !="") { $("#amount_3").val(-amount_3) };
            } 
            e.preventDefault();
            fetch(form.action, {
                method : "POST",
                body: new FormData(document.getElementById("form_transaction")),
            }).then(
                response => response.json()
            ).then((html) => {
                // you can put any JS code here
                alert("success")
            });
        });

    </script>
  </html>
